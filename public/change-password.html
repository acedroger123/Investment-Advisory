<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Forgot Password | AI Wealth</title>
  <meta name="description" content="Securely reset your AI Wealth password to regain access.">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/lucide@latest"></script>
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="style.css">
</head>

<body class="auth-body">

  <div class="auth-container">

    <section class="brand-side">
      <div class="brand-content">
        <div class="logo-area">
          <i data-lucide="wallet" size="48" color="white"></i>
          <span class="logo-text">AI Wealth</span>
        </div>
        <h1 class="hero-title">Account Recovery.</h1>
        <p class="hero-subtitle">
          Securely reset your password to regain access to your portfolio.
        </p>
      </div>
    </section>

    <section class="form-side">
      <div class="auth-card">
        <div class="card-header">
          <a href="SignIn.html" class="back-link">
            <i data-lucide="arrow-left" size="16"></i> Back to Login
          </a>
          <h2>Forgot Password?</h2>
          <p>Enter your registered email to receive an OTP.</p>
        </div>

        <form id="requestOtpForm">

          <div class="form-group">
            <label for="email">Email Address</label>
            <div class="input-wrapper">
              <i data-lucide="mail" class="input-icon" size="18"></i>
              <input type="email" id="email" placeholder="name@example.com" required>
            </div>
          </div>

          <button type="submit" class="primary-btn" id="sendBtn">Send OTP</button>

        </form>
      </div>
    </section>
  </div>

  <script>
    lucide.createIcons();

    document.getElementById("requestOtpForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const email = document.getElementById("email").value;
      const btn = document.getElementById("sendBtn");

      try {
        btn.innerHTML = "Sending...";
        btn.disabled = true;

        const res = await fetch("/password/request-otp", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ email })
        });

        const data = await res.json();

        if (res.ok) {
          window.location.href = "verify-otp.html";
        } else {
          alert(data.message || "Failed to send OTP");
          btn.innerHTML = "Send OTP";
          btn.disabled = false;
        }
      } catch (err) {
        alert("Server connection error");
        btn.innerHTML = "Send OTP";
        btn.disabled = false;
      }
    });
  </script>
</body>

</html>